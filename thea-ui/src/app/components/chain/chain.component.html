<div class="float-right" *ngIf="chain">
    <button class="btn btn-outline-primary" type="submit" (click)="reinspect()">Reinspect</button>
</div>
<div class="alert alert-danger" *ngIf="error">
    <strong>Warning!</strong> {{error}}
</div>

<h2>Certificate Chain</h2>

<app-certificate-chain [chain]="chain"></app-certificate-chain>

<div *ngIf="chain && !historicalChains">
    <button class="btn btn-outline-primary" type="submit" (click)="showHistory()">Show History</button>
</div>

<div *ngIf="historicalChains">
  <h5>Search history for: <code>{{chain.hostname}}</code></h5>
  <div *ngIf="historicalChains?.length > 0; else noResultsMessage">
    <ul class="list-group">
      <li class="list-group-item d-flex justify-content-between align-items-center" *ngFor="let histChain of historicalChains" >
        <a routerLink="/chain/{{histChain?.certificateChainId}}">{{histChain?.timestamp|date:'medium'}}</a>
        <span *ngIf="histChain.success" class="badge badge-success">Success</span>
        <span *ngIf="!histChain.success" class="badge badge-warning">Warnings</span>
      </li>
    </ul>
  </div>
  <ng-template #noResultsMessage>(No results)</ng-template>
</div>
<br>
